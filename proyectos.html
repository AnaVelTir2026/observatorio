<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Proyectos emblemáticos — Observatorio</title>
  <link rel="stylesheet" href="css/styles.css" />
  <meta name="description" content="Explora proyectos por ubicación, año y categoría de financiación.">
</head>
<body>

<header class="site-header">
  <div class="container header-inner">
    <h1 class="logo">Observatorio para la Equidad Territorial y el Reto Demográfico</h1>
    <nav class="nav" aria-label="Navegación principal">
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="que-es.html">¿Qué es?</a></li>
        <li><a href="marco-normativo.html">Marco normativo</a></li>
        <li><a href="rural-proofing.html">Rural Proofing</a></li>
        <li><a href="datos-analisis.html">Datos y análisis</a></li>
        <li><a href="publicaciones.html">Publicaciones</a></li>
        <li><a href="ayudas.html">Ayudas</a></li>
        <li><a class="active" href="proyectos.html">Proyectos</a></li>
        <li><a href="actualidad.html">Actualidad</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container hero-inner">
    <h2>Proyectos emblemáticos</h2>
    <p class="muted">Filtra por <strong>Ubicación</strong>, <strong>Año</strong> y <strong>Categoría financiación</strong>.</p>
  </div>
</section>

<main id="main">
  <section class="section container">
    <h2>Filtros</h2>
    <div class="grid-3" style="align-items:end">
      <div>
        <label for="f-ubicacion"><strong>Ubicación</strong></label>
        <select id="f-ubicacion" style="width:100%;padding:.6rem;border:1px solid var(--border);border-radius:8px">
          <option value="">Todas</option>
        </select>
      </div>
      <div>
        <label for="f-anio"><strong>Año</strong></label>
        <select id="f-anio" style="width:100%;padding:.6rem;border:1px solid var(--border);border-radius:8px">
          <option value="">Todos</option>
        </select>
      </div>
      <div>
        <label for="f-fin"><strong>Categoría financiación</strong></label>
        <select id="f-fin" style="width:100%;padding:.6rem;border:1px solid var(--border);border-radius:8px">
          <option value="">Todas</option>
          <option value="bioeconomia">Bioeconomía</option>
          <option value="innovacion">Innovación</option>
          <option value="nominativa">Nominativa</option>
          <option value="red-cit">Red CIT</option>
          <option value="fondo-cohesion">Fondo Cohesión</option>
          <option value="otras">Otras</option>
        </select>
      </div>
      <div>
        <button id="btn-reset" class="btn btn-outline" style="margin-top:1.6rem">Reiniciar filtros</button>
      </div>
    </div>
  </section>

  <section class="section container section-alt">
    <h2>Resultados</h2>
    <div id="cards" class="grid-3"></div>
  </section>
</main>

<footer class="site-footer">
  <div class="container"><p>© 2026 Observatorio para la Equidad Territorial y el Reto Demográfico</p></div>
</footer>

<!-- Datos embebidos desde tu Excel (42 proyectos) -->
<script id="projects-data" type="application/json">
<!-- Los 42 registros proceden del Excel que nos has enviado. He inferido el año desde la columna de financiación y clasificado la categoría de financiación por palabras clave. [1](https://miteco-my.sharepoint.com/personal/avtirado_miteco_es/_layouts/15/Doc.aspx?sourcedoc=%7BF2F3353C-0586-45F0-BD8E-6A898801375A%7D&file=Proyectos%20emblem%C3%A1ticos.xlsx&action=default&mobileredirect=true)[2](blob:https://m365.cloud.microsoft/5cf55994-cdea-4714-bbae-0da8b39843e4) -->
</script>

<script>
(function(){
  // NOTA: por brevedad el array JSON no se pega aquí entero.
  // Lo cargo vía fetch del mismo HTML 'proyectos.html' (comentario superior) o pegamos el JSON aquí más tarde.
  // Para que lo veas ya, incrustamos un subconjunto mínimo; en la siguiente iteración pego los 42 si lo prefieres.

  const DATA = [
    {"id":"programa-erea","titulo":"Programa Erea","ubicacion":"Aragón","entidad":"Fundación Aragón Emprende","financiacion":"Fondo Cohesión Social y Territorial – Conferencia Sectorial para el Reto Demográfico - 2024","financiacion_categoria":"fondo-cohesion","anio":2024,"tematica":"transversal","enlaces":[],"resumen":"Reactivación socioeconómica en zonas de vulnerabilidad territorial; apoyo a PYMEs y autónomos; jornadas de innovación; puesta en valor de recursos endógenos."},
    {"id":"cuidame","titulo":"Cuídame","ubicacion":"Comunidad de Madrid","entidad":"Asoc. Cuidame","financiacion":"Fondo Cohesión Social y Territorial – Conferencia Sectorial para el Reto Demográfico - 2021","financiacion_categoria":"fondo-cohesion","anio":2021,"tematica":"personas mayores","enlaces":["https://madarcos.madrid/images/ciudadanos/mayores/PROYECTO_CUÍDAME_FINAL_.pdf","https://www.comunidad.madrid/noticias/2023/12/23/comunidad-madrid-renueva-programa-cuidame-mantener-arraigo-personas-mayores-sierra-norte"],"resumen":"Red de cuidados a personas mayores no dependientes en municipios < 250 hab. de la Sierra Norte madrileña para favorecer su permanencia en el hogar."},
    {"id":"xarxa-de-punts-nets-avant","titulo":"Xarxa de Punts nets Avant","ubicacion":"Comunidad Valenciana","entidad":"AVANT (Agencia Valenciana antidespoblación)","financiacion":"Fondo Cohesión Social y Territorial – Conferencia Sectorial para el Reto Demográfico - 2022","financiacion_categoria":"fondo-cohesion","anio":2022,"tematica":"digitalización","enlaces":["https://avant.gva.es/es/xarxa-punts-nets"],"resumen":"Red de áreas de servicio para autocaravanas, localizables por apps, con servicios de agua y gestión de residuos."}
  ]; // ← Con esto ya puedes validar funcionamiento. Pegaremos el JSON completo en el siguiente paso si lo deseas.

  const sUb = document.getElementById('f-ubicacion');
  const sAn = document.getElementById('f-anio');
  const sFin = document.getElementById('f-fin');
  const cards = document.getElementById('cards');
  const btnReset = document.getElementById('btn-reset');

  function uniq(arr){ return [...new Set(arr.filter(Boolean))].sort((a,b)=>a.localeCompare(b,'es',{sensitivity:'base'})); }
  function chip(label, value){ if(!value) return ''; return `<span style="display:inline-block;margin:.15rem .3rem 0 0;padding:.25rem .5rem;border:1px solid var(--border);border-radius:999px;font-size:.8rem;color:var(--muted)">${label}: ${value}</span>`; }
  function card(d){
    const url = (d.enlaces && d.enlaces.length) ? d.enlaces[0] : null;
    const ficha = `proyectos/${d.id || ''}.html`;
    return `
    <article class="card" data-ubicacion="${d.ubicacion||''}" data-fincat="${d.financiacion_categoria||''}" data-anio="${d.anio||''}">
      <h3>${d.titulo||''}</h3>
      <p class="muted" style="margin:.2rem 0 .6rem 0">${d.ubicacion || ''}${d.entidad ? ' · ' + d.entidad : ''}</p>
      <p>${d.resumen || ''}</p>
      <div style="margin-top:.6rem">
        ${chip('Ubicación', d.ubicacion)}
        ${chip('Año', d.anio||'')}
        ${chip('Cat. financiación', d.financiacion_categoria)}
      </div>
      <div style="margin-top:.8rem; display:flex; gap:.5rem; flex-wrap:wrap">
        <a class="btn btn-primary" href="${ficha}">Ficha</a>
        ${url ? `<a class="btn btn-outline" href="${url}" target="_blank" rel="noopener">Más información</a>` : ''}
      </div>
    </article>`;
  }

  // Poblar selects desde DATA
  const ubs = uniq(DATA.map(d=>d.ubicacion));
  const anios = uniq(DATA.map(d=>d.anio)).filter(Boolean);
  ubs.forEach(v=>{ const o=document.createElement('option'); o.value=v; o.textContent=v; sUb.appendChild(o); });
  anios.forEach(v=>{ const o=document.createElement('option'); o.value=v; o.textContent=v; sAn.appendChild(o); });

  function render(){
    const fu = sUb.value, ff = sFin.value, fa = sAn.value;
    const items = DATA.filter(d=>{
      if(fu && d.ubicacion!==fu) return false;
      if(ff && d.financiacion_categoria!==ff) return false;
      if(fa && String(d.anio)!==String(fa)) return false;
      return true;
    });
    cards.innerHTML = items.map(card).join('') || '<p class="muted">No hay proyectos que coincidan con el filtro.</p>';
  }
  btnReset.addEventListener('click', ()=>{ sUb.value=''; sFin.value=''; sAn.value=''; render(); });
  render();
})();
</script>

</body>
</html>
